"use strict";var ctrlH,containerH,trackH,topLimit,bottomLimit,contentPercent,sliderPos=0,sliderTop=0,slidePercent=0,contentH=0,scrollDist=0,contentsTop=0;function resizeIframes(){$("#magnifier iframe").attr("width",$("#magnifier .section-inner").width()),$("#magnifier iframe").attr("height",.75*$("#magnifier .section-inner").width()),$("#reel iframe").attr("width",$("#reel .section-inner").width()),$("#reel iframe").attr("height",.5625*$("#reel .section-inner").width()),updateScrollVars()}function updateScrollVars(){containerH=$("#pane").height(),contentH=$(".content").outerHeight(),contentPercent=(contentH-containerH)/contentH,$("#scroll").css({height:containerH}),ctrlH=$("#scroll-bar").height(),trackH=$("#scroll").height(),topLimit=$("#scroll").offset().top,bottomLimit=trackH+topLimit}$(document).ready(function(){$("#scroll-bar").on("mousedown",function(t){t.preventDefault(),$(this).addClass("dragging"),$("body").on("mousemove",function(t){(sliderPos=t.pageY-ctrlH/2)<topLimit&&(sliderPos=topLimit),containerH+15<=sliderPos&&(sliderPos=containerH+15),$(".dragging").offset({top:sliderPos}),slidePercent=(sliderTop=sliderPos-topLimit)/(trackH-30)*contentPercent,scrollDist=Math.round(slidePercent*contentH),contentH-containerH+30<scrollDist&&(scrollDist=contentH-containerH+30),$(".content div").eq(0).css({top:-scrollDist})}).on("mouseup",function(){$(".dragging").removeClass("dragging"),$(this).off("mousemove")}).on("mouseleave",function(){$(".dragging").removeClass("dragging"),$(this).off("mousemove")})}),$(document).on("wheel mousewheel",function(t){return t.originalEvent.wheelDelta<0||0<t.originalEvent.deltaX||0<t.originalEvent.deltaY?(sliderTop+=containerH-30-50<=sliderTop?containerH-30-sliderTop:50,$("#scroll-bar").animate({top:sliderTop},100),slidePercent=sliderTop/(trackH-30)*contentPercent,scrollDist=Math.round(slidePercent*contentH),contentH-containerH-0<scrollDist&&(scrollDist=contentH-containerH-0)):(sliderTop<50?sliderTop=0:sliderTop-=50,$("#scroll-bar").animate({top:sliderTop},100),slidePercent=sliderTop/(trackH-30)*contentPercent,scrollDist=Math.round(slidePercent*contentH)),$(".content div").eq(0).animate({top:-scrollDist},100),!1});var o=0;document.addEventListener("touchstart",function(t){t.preventDefault();var e=t.changedTouches[0];o=e.pageY},!1),document.addEventListener("touchmove",function(t){t.preventDefault();var e=t.changedTouches[0].pageY,n=contentH-containerH;contentsTop+(scrollDist=e-o)<-n?scrollDist=-(n+contentsTop):0<contentsTop+scrollDist&&(scrollDist=-contentsTop),$(".content").css({top:contentsTop+scrollDist})},!1),document.addEventListener("touchend",function(t){t.changedTouches[0].pageY;contentsTop=$(".content").position().top},!1),updateScrollVars()}),$(".content iframe").load(function(){resizeIframes(),updateScrollVars()});