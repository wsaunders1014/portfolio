function screenChange(){winW=$(window).width(),winH=$(window).height(),winO=winW>winH?"landscape":"portrait",winD=winW>1024?"desktop":winW>=768?"tablet":"mobile"}function unlockedToAccessing(e){function t(){o.find(".code-input").focus()}var o=e.parents(".day-contents");o.removeClass("unlocked").addClass("accessing"),$(".code-input").fitText(.8),TweenMax.to(o.find(".enter"),.5,{top:"53%",ease:Power1.easeOut}),TweenMax.to(o.find(".code-input"),.5,{left:"10%",ease:Power2.easeOut,delay:.5,onComplete:t}),o.find(".code-input").on("focus",function(){o.find(".code-input").attr("placeholder",""),o.find(".form-group").removeClass("has-error")}),$(".accessing .enter").on("click",function(){return tryCode(o),!1})}function accessingSuccess(e){function t(){a.html(e.htmlR),a.find(".reward").attr("src",e.imgSrc),a.find(".day-log").fitText(),a.find(".share").fitText(1.2),a.find(".reward").attr("src",e.imgSrc),TweenMax.set(a.find(".reward"),{left:"-100%"}),TweenMax.set(a.find(".share-off"),{bottom:"0%",right:"-25%"}),TweenMax.to(a.find(".reward"),.5,{left:"0%",ease:Power2.easeOut,onComplete:o}),TweenMax.to(a.find(".share-off"),.3,{bottom:"0%",right:"0%"}),a.find(".share").on("mouseover",function(){TweenMax.to($(this).siblings(".share-off"),.3,{bottom:"0%",right:"-25%"}),TweenMax.to($(this).siblings(".share-on"),.3,{bottom:"0%",right:"0%"})}),a.find(".share").on("mouseout",function(){TweenMax.to($(this).siblings(".share-on"),.3,{bottom:"-25%",right:"0%"}),TweenMax.to($(this).siblings(".share-off"),.3,{bottom:"0%",right:"0%"})})}function o(){24==e.daysUnlocked?$("#video-holder").load("php/video.php",function(){var t=$("#video-holder").offset().top;videoOffset=$(".wrapper").height()-$("#video-holder").offset().top,$("html,body").animate({scrollTop:t},600),videoMarginTop=$(".video-header").css("margin-top"),TweenMax.set($("#container-video"),{left:"-100%"}),TweenMax.set([$("#video-grid-all"),$("#ytplayer")],{opacity:0}),TweenMax.set($(".video-header"),{marginTop:"0%"}),TweenMax.set($(".video-footer"),{marginTop:"-23%"}),videoUnlocked(),currDay=e.day}):(currDay=e.day,dataLayer.push({pageName:"Reward"+e.day,event:"pageView"}),$("#modal-img").css({backgroundImage:'url("img/rewards/24M_Content_Day_'+dayIs+'.gif")'}),$("#modal-sharing").modal("show"),modalMargin(1))}var a=$("#day-"+e.day).find(".day-internal"),i=a.find("input");preloadImage(e.imgSrc),i.blur(),i.val(""),i.attr("placeholder",e.message),a.find(".form-group").removeClass("has-error"),a.find(".form-group").addClass("has-success"),TweenMax.to(a.find(".enter"),.5,{left:"-80%",ease:Power2.easeIn}),TweenMax.to(a.find(".find"),.5,{left:"100%",ease:Power2.easeIn}),TweenMax.to(a.find(".code-input"),.5,{left:"100%",ease:Power2.easeIn,delay:.5,onComplete:t}),shareFn(e.day)}function preloadImage(e){var t=new Image;t.src=e}function displayAllElements(){$.each($(".unlocked .day-internal"),function(e,t){TweenMax.set($(t).find(".enter"),{left:"100%"}),TweenMax.set($(t).find(".find"),{left:"-80%"}),TweenMax.to($(t).find(".enter"),.5,{left:"10%",delay:e/10}),TweenMax.to($(t).find(".find"),.5,{left:"10%",delay:e/10})})}function videoUnlocked(){console.log("video unlocked"),dataLayer.push({pageName:"/exclusive_video",event:"pageView"}),header=$(".video-header-text span").eq(0).html(),$(".video-header-text span").eq(0).html(""),$(".video-header").fitText(2),$(".video-footer").fitText(2.5),$(".footer-buttons").fitText(1.4);var e=$("#container-video"),t=shuffleFY($(".video-grid img")),o=new TimelineLite;o.addLabel("beginning",0),o.to(e,1,{left:"0%"}),$.each(t,function(e,t){o.set(t,{rotation:getRandom(-45,45),top:getRandom(-50,50)+"%",left:getRandom(-50,50)+"%",opacity:0},"beginning")}),o.staggerTo(t,1,{opacity:1,rotation:0,top:"0%",left:"0%"},.2),isMobile?(o.to($("#video-grid-all"),1,{autoAlpha:1,onComplete:visify}),o.to($("#ytplayer"),1,{autoAlpha:1})):o.to($("#video-grid-all"),1,{autoAlpha:1,onComplete:visify}),o.to($(".video-grid"),1,{autoAlpha:0,delay:1},"-=1"),o.to($(".video-header"),1,{marginTop:videoMarginTop,ease:Power2.easeOut,onComplete:typeTitle},"-=1"),o.to($(".video-footer"),1,{marginTop:"0%",ease:Power2.easeOut,delay:.5},"-=1"),1!=o.isActive()&&o.play()}function visify(){$("#ytplayer").css({visibility:"visible",opacity:1})}function typeTitle(){$("span",".video-header-text").typed({strings:[header],typeSpeed:10,callback:function(){setTimeout(function(){$(".typed-cursor").css({visibility:"hidden"})},2700)}})}function modalMargin(e){var t=$(".modal-dialog").eq(e).innerHeight();$(".modal-dialog").eq(e).width();var o=(winH-t)/2;0>o&&(o=0),$(".modal-dialog").eq(e).css({marginTop:o})}function showLegalTray(){$("#copy-legal").show(),$("#link-legal").addClass("active"),"desktop"==winD||"tablet"==winD?(TweenMax.to($("#container-footer"),1,{bottom:"0px",ease:Power2.easeOut}),"tablet"!=winD&&"portrait"!=winO&&TweenMax.to($("#container-dvd"),.5,{bottom:"160px",ease:Power2.easeOut})):TweenMax.to($("#container-footer"),1,{bottom:"-53px",ease:Power2.easeOut}),viewingTray=!0}function hideLegalTray(){function e(){$(".copy-footer").hide()}$(".link-footer").removeClass("active"),"desktop"==winD||"tablet"==winD?(TweenMax.to($("#container-footer"),.5,{bottom:"-70px",ease:Power2.easeOut,onComplete:e}),"portrait"!=winO&&TweenMax.to($("#container-dvd"),1,{bottom:"80px",ease:Power2.easeOut})):TweenMax.to($("#container-footer"),1,{bottom:"-200px",ease:Power2.easeOut}),viewingTray=!1}function getRandom(e,t){return Math.random()*(t-e)+e}function shuffleFY(e){for(var t,o,a=e.length;a;)o=Math.floor(Math.random()*a--),t=e[a],e[a]=e[o],e[o]=t;return e}var isTouchDevice="ontouchstart"in document.documentElement;isMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());var winW,winH,winO,winD;screenChange(),$(window).on("resize orientationchange",screenChange),function(e){e.fn.fitText=function(t,o){var a=t||1,i=e.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},o);return this.each(function(){var t=e(this),o=function(){t.css("font-size",Math.max(Math.min(t.width()/(10*a),parseFloat(i.maxFontSize)),parseFloat(i.minFontSize)))};o(),e(window).on("resize.fittext orientationchange.fittext",o)})}}(jQuery),$(".num").fitText(.15),$(".day-log").fitText(),$(".code-but").fitText(.8),$(".share-reward").fitText(.8),("desktop"==winD||"tablet"==winD)&&$("#footer-links").fitText(19),$(".cta.desktop").fitText(1.15),$(".cta.mobile").fitText(.8),$(".dvd-buy-button").fitText(.9),$(".video-header").fitText(2),$(".video-footer").fitText(2.5),$(".footer-buttons").fitText(1.4),$(".day-contents .share").fitText(1.2),$(".share").on("click",function(){return $("#modal-sharing").modal("show"),!1}),$("#modal-sharing").on("shown.bs.modal",function(){$(".share-but").fitText(.2)}),$("#modal-landing").on("shown.bs.modal",function(){$("h2",".modal-body").fitText(.9),$("h2",".modal-footer").fitText(2.5)}),$(".social-button").on("click",function(){var e=$(".social-tray").position().left-winW;return e>=-160?($(".social-button").css({height:"33px"}),TweenMax.to($("#fb-login"),1,{right:"+=320px",ease:Power2.easeOut}),TweenMax.to($(".social-tray"),1,{right:"0px",ease:Power2.easeOut}),TweenMax.to($(".bar-1"),1,{rotation:"135",right:"6px",top:"21px",ease:Power3.easeOut}),TweenMax.to($(".bar-2"),.5,{autoAlpha:0}),TweenMax.to($(".bar-3"),1,{rotation:"-135",right:"6px",top:"21px",ease:Power3.easeOut})):($(".social-button").css({height:"44px"}),TweenMax.to($("#fb-login"),1,{right:"-=320px",ease:Power2.easeOut}),TweenMax.to($(".social-tray"),1,{right:"-100%",ease:Power2.easeOut}),TweenMax.to($(".bar-1"),1,{rotation:"0",right:"5px",top:"15px",ease:Power3.easeOut}),TweenMax.to($(".bar-2"),1,{autoAlpha:1,delay:0}),TweenMax.to($(".bar-3"),1,{rotation:"0",right:"7px",top:"27px",ease:Power3.easeOut})),!1});var videoMarginTop;"mobile"!=winD&&($(".dvd-boxes").on("mouseover",function(){$("#dvd-box").stop().animate({left:"2%"},400),$("#bluray-box").stop().animate({left:"49%"},400)}),$(".dvd-boxes").on("mouseleave",function(){$("#dvd-box").stop().animate({left:"12%"},400),$("#bluray-box").stop().animate({left:"39%"},400)}));var header="Mission Accomplished",viewingTray=!1;$("#link-legal").on("click",function(){return"mobile"!=winD?(viewingTray?hideLegalTray():(dataLayer.push({pageName:"/legal",event:"pageView"}),showLegalTray()),!1):(dataLayer.push({pageName:"/legal",event:"pageView"}),window.open("http://www.foxprivacy.com/us/footer.html"),void 0)}),$("#container-footer").mouseleave(hideLegalTray);